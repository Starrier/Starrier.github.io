var searchFunc=function(t,e,r){"use strict";var a=document.getElementById(e),l=document.getElementById(r);$.ajax({url:t,dataType:"xml",success:function(t){var e=$("entry",t).map((function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}})).get();l.innerHTML="",a.addEventListener("input",(function(){var t='<ul class="search-result-list">',r=this.value.trim().toLowerCase().split(/[\s\-]+/);if(l.innerHTML="",!(this.value.trim().length<=0)){if(e.forEach((function(e){var a=!0;e.title&&""!==e.title.trim()||(e.title="Untitled");var l=e.title.trim(),n=l.toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,""),s=c.toLowerCase(),i=e.url,u=-1,o=-1,h=-1;if(""!==s?r.forEach((function(t,e){u=n.indexOf(t),o=s.indexOf(t),u<0&&o<0?a=!1:(o<0&&(o=0),0==e&&(h=o))})):a=!1,a){t+="<li><a class='color-primary' href='"+i+"' class='search-result-title' target='_blank'>"+l+"</a>";var f=c;if(h>=0){var p=h-20,m=h+80;p<0&&(p=0),0==p&&(m=100),m>f.length&&(m=f.length);var v=f.substr(p,m);r.forEach((function(t){var e=new RegExp(t,"gi");v=v.replace(e,'<span class="search-keyword">'+t+"</span>")})),t+='<p class="search-result">'+v+"...</p>"}t+="</li>"}})),-1===(t+="</ul>").indexOf("<li>"))return l.innerHTML="<ul><span class='local-search-empty'>没有找到内容，请尝试更换检索词。<span></ul>";l.innerHTML=t}}))}}),$(document).on("click","#local-search-close",(function(){$("#local-search-input").val(""),$("#local-search-result").html("")}))},getSearchFile=function(t){searchFunc(t,"local-search-input","local-search-result")};